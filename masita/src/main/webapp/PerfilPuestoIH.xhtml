<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Masita</title>
        <meta name="author" content="The Author"></meta>
    </h:head>

    <h:outputStylesheet name="first.css"/>

    <!-- Add 50px padding top to the body for the navbar -->
    <h:body style="padding-top: 50px; padding-bottom: 20px;">
        <b:navBar brand="Masita" brandHref="#" inverse="true" fixed="top">
            <h:form styleClass="navbar-form navbar-right">
                <b:commandButton action="a" value="Regístrate" look="warning" icon="chevron-right" iconAlign="right"/>
                <b:commandButton action="a" value="Iniciar Sesión" look="success" icon="chevron-right" iconAlign="right"/>
            </h:form>
        </b:navBar>
        <b:jumbotron>
            <b:container>
                <br /> 
                <b:row>
                    <b:column col-lg="8">
                        <b:panel look="primary" title="Localización del puesto">
                            <iframe width="100%" height="400" frameborder="0"
                                    scrolling="no" marginheight="0" marginwidth="0"
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3765.054246151732!2d-99.18183038478072!3d19.32345224916825!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ce000fdd96288f%3A0x1096af9b5b03d38d!2sFacultad+de+Ciencias%2C+UNAM!5e0!3m2!1ses!2smx!4v1489916016734">                                            
                            </iframe>                                                           
                        </b:panel>
                    </b:column>
                    <b:column col-lg="4">
                        <b:panel look="success" title="Cafeteria Ciencias">
                            <h5>Comida Corrida</h5>
                            <p><img src="./imagenes/stars3.png" width="70%"></img></p>
                        </b:panel>
                    </b:column>
                    <b:column col-lg="4">
                        <b:panel look="info" title="Información Puesto">
                            <p><strong>Horario:</strong> 9:00 - 18:00</p>
                            <p><strong>Mesas:</strong> Si</p>
                            <p><strong>Baños:</strong> No</p>
                        </b:panel>
                    </b:column>

                </b:row>                                        
            </b:container>

        </b:jumbotron>       


        <b:container>
            <h:form id="form">
                <p:growl id="msgs" showDetail="true"/>
                <p:dataTable var="comentario" value="#{leerComentario.comentarios}" 
                             editable="true" id="listaC">
                    <p:ajax event="rowEdit" listener="#{leerComentario.onRowEdit}" update=":form:msgs" />
                    <p:ajax event="rowEditCancel" listener="#{leerComentario.onRowCancel}" update=":form:msgs" />

                    <p:column headerText="Usuario">
                        <h:outputText value="#{comentario.idUsuario}" />
                    </p:column>

                    <p:column headerText="Comentario">
                        <h:outputText value="#{comentario.contenido}" />
                    </p:column>

                    <p:column headerText="Calificación">
                        <p:rating value="#{comentario.calificacion}" readonly="true" />

                    </p:column>

                    <p:column headerText="fecha">
                        <h:outputText value="#{comentario.fecha}" />
                    </p:column>
                    <p:column style="width:32px">
                                                <p:rowEditor />
                                            </p:column>
                </p:dataTable>
            </h:form>
        </b:container>

        <br />
        <br />

        <b:container>      


            <h:form>

                <p:panel id="panel" header="¿Qué piensas sobre este puesto?" footer="" style="margin-bottom: 10px" closable="true" >
                    <h:outputText/>
                    <br/>
                    <p:inputTextarea value="#{crearComentario.nuevo.contenido}" style="width: 100%" rows="10"/>
                    <br />                    

                    <p:commandButton id='btn' value="Comentar" 
                                     ajax="false" action="#{crearComentario.crearComentario()}" image="ui-icon-document" style="float:right; font-size:20px"/>
                    <br />
                    <f:metadata>
                        <f:viewParam name="idPuesto" value="#{crearComentario.idPuesto}" />
                    </f:metadata>
                    <p:rating value="#{crearComentario.nuevo.calificacion}" stars="5" 
                              cancel="false" onRate="alert('Tu calificaste con: ' + value)" style="float:left; width: 100px; height: 100px">
                        <p:ajax event="rate" listener="#{crearComentario.calificarPuesto()}"/>
                    </p:rating>

                    <h:outputText value="Comentario creado:" />    

                    <h:outputText id="display"
                                  value="#{crearComentario.nuevo.contenido}" style="font-weight: bold" />

                </p:panel>

            </h:form>            





        </b:container>
    </h:body>
</html>