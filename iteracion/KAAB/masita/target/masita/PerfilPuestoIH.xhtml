<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Masita</title>
        <meta name="author" content="The Author"></meta>
        <script src="http://maps.google.com/maps/api/js?key=AIzaSyBlEYhBfp104jOYDy-TOhTYkSd8YBtkLFI" type="text/javascript"></script>
        
    </h:head>

    <h:outputStylesheet name="first.css"/>

    <f:metadata>
        <f:viewParam name="idPuesto" value="#{puestos.idPuesto}" />
        <f:viewParam name="calificacion" value="#{leercomentario.calificacion}" />
    </f:metadata>

    <!-- Add 50px padding top to the body for the navbar -->
    <h:body style="padding-top: 50px; padding-bottom: 20px;">
        <b:navBar brand="Masita" brandHref="#" inverse="true" fixed="top">
            <h:form styleClass="navbar-form navbar-right">
                <b:commandButton action="a" value="Regístrate" look="warning" icon="chevron-right" iconAlign="right"/>
                <b:commandButton action="a" value="Iniciar Sesión" look="success" icon="chevron-right" iconAlign="right"/>
            </h:form>
        </b:navBar>
        <p:dataList value="#{puestos.getInformacionPuesto()}" var="c" type="ordered" lazy="true">
            <b:jumbotron>
                <b:container>
                    <br /> 
                    <b:row>
                        <b:column col-lg="8">
                            <b:panel look="primary" title="Localización del puesto">
                                <h:form>
                                    <f:view contentType="text/html">
                                <p:gmap id="gmap" center="19.324328359583355,-99.17934268712997" zoom="18" type="HYBRID" model="#{infoPuestos.advancedModel}" style="width:100%;height:400px">

                                    <p:ajax event="overlaySelect" listener="#{infoPuestos.onMarkerSelect}"/>

                                    <p:gmapInfoWindow id="infoWindow">
                                        <p:outputPanel style="text-align: center; display: block; margin: auto">

                                            <h:outputText value="#{c.nombre}"/>

                                        </p:outputPanel>
                                    </p:gmapInfoWindow>
                                </p:gmap>
                                    </f:view>
                                </h:form>
                            </b:panel>
                        </b:column>
                        <b:column col-lg="4">
                            <b:panel look="success" title="#{c.nombre}">
                                <h5>Comida Corrida</h5>
                                <p:rating value="4" readonly="true" />
                            </b:panel>
                        </b:column>
                        <b:column col-lg="4">
                            <b:panel look="info" title="Información Puesto">
                                <p><strong>Horario:</strong> #{c.horario}</p>
                                <!-- Leer los servicios -->
                                <p><strong>Mesas:</strong> Si</p>
                                <p><strong>Baños:</strong> No</p>

                            </b:panel>
                        </b:column>
                    </b:row>                                        
                </b:container>
            </b:jumbotron>   

        </p:dataList>
        <b:container>
            <p:dataTable var="comentario" value="#{leerComentario.crearListaComentarios()}">
                <p:column headerText="Usuario">
                    <h:outputText value="#{comentario.idUsuario}" />
                </p:column>

                <p:column headerText="Comentario">
                    <h:outputText value="#{comentario.contenido}" />
                </p:column>

                <p:column headerText="Calificación">
                    <p:rating value="#{comentario.calificacion}" readonly="true" />
                    <h:outputText value="#{comentario.calificacion}" />
                </p:column>

                <p:column headerText="fecha">
                    <h:outputText value="#{comentario.fecha}" />
                </p:column>
            </p:dataTable>

        </b:container>

    </h:body>
</html>
